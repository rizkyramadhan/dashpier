(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{608:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(366),a=n.n(r),o=n(42),i=n.n(o),s=n(17),l=n.n(s),u=n(21),c=n.n(u),p=n(4),f=n.n(p),y=n(1),v=n.n(y),g=n(0),h=n.n(g),d=n(67),b=n(121),m=n(22),E=n(19),O=n(37),w=n.n(O);function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=(t.__proto__||Object.getPrototypeOf(t)).call(this,e))||"object"!=typeof a&&"function"!=typeof a?C(r):a).state=n.state||{},n.getScopedEvents=d.a.getScopedEvents.bind(C(n)),n.getEventState=d.a.getEventState.bind(C(n)),n.getTimer=n.getTimer.bind(C(n)),n.baseProps=n.getBaseProps(e),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n=t,(r=[{key:"getChildContext",value:function(){return{getTimer:this.getTimer}}},{key:"shouldComponentUpdate",value:function(e){if(!w()(this.props,e)){this.baseProps=this.getBaseProps(e);var t=this.getExternalMutations(e,this.baseProps);this.applyExternalMutations(e,t)}return!0}},{key:"getTimer",value:function(){return this.context.getTimer?this.context.getTimer():(this.timer||(this.timer=new b.a),this.timer)}},{key:"getAllEvents",value:function(e){var t=d.a.getComponentEvents(e,["container","groupComponent"]);return Array.isArray(t)?Array.isArray(e.events)?t.concat.apply(t,T(e.events)):t:e.events}},{key:"applyExternalMutations",value:function(e,t){if(!i()(t)){var n=e.externalEventMutations.reduce((function(e,t){return e=c()(t.callback)?e.concat(t.callback):e}),[]),r=n.length?function(){n.forEach((function(e){return e()}))}:void 0;this.setState(t,r)}}},{key:"getExternalMutations",value:function(e,t){return i()(e.externalEventMutations)?void 0:d.a.getExternalMutationsWithChildren(e.externalEventMutations,t,this.state,Object.keys(t))}},{key:"getBaseProps",value:function(e){var t=e.container,n=v.a.Children.toArray(this.props.children),r=this.getBasePropsFromChildren(n),a=t?t.props:{};return f()({},r,{parent:a})}},{key:"getBasePropsFromChildren",value:function(e){var t=m.a.reduceChildren(e,(function(e,t){if(e.type&&c()(e.type.getBaseProps)){var n=e.props&&e.type.getBaseProps(e.props);return n?[[t,n]]:null}return null}));return a()(t)}},{key:"getNewChildren",value:function(e,t){var n=this,r=e.events,a=e.eventKey,o=function(e,i){return e.reduce((function(e,s,l){if(s.props.children){var u=v.a.Children.toArray(s.props.children),p=i.slice(l,l+u.length),y=v.a.cloneElement(s,s.props,o(u,p));return e.concat(y)}if(s.type&&c()(s.type.getBaseProps)){var g=s.props.name||i[l],h={events:Array.isArray(r)&&r.filter((function(e){return"parent"!==e.target&&(Array.isArray(e.childName)?e.childName.indexOf(g)>-1:e.childName===g||"all"===e.childName)})),getEvents:function(e,r){return n.getScopedEvents(e,r,g,t)},getEventState:function(e,t){return n.getEventState(e,t,g)}};return e.concat(v.a.cloneElement(s,f()({key:"events-".concat(g),sharedEvents:h,eventKey:a,name:g},s.props)))}return e.concat(s)}),[])},i=Object.keys(t),s=v.a.Children.toArray(e.children);return o(s,i)}},{key:"getContainer",value:function(e,t,n){var r=this,a=this.getNewChildren(e,t),o=Array.isArray(n)&&n.filter((function(e){return"parent"===e.target})),i=o.length>0?{events:o,getEvents:function(e,n){return r.getScopedEvents(e,n,null,t)},getEventState:this.getEventState}:null,s=e.container||e.groupComponent,u=s.type&&s.type.role,c=s.props||{},p=d.a.getEvents.bind(this),y=i&&p({sharedEvents:i},"parent"),g=l()({},this.getEventState("parent","parent"),c,t.parent,{children:a}),h=l()({},d.a.getPartialEvents(y,"parent",g),c.events);return"container"===u?v.a.cloneElement(s,f()({},g,{events:h})):v.a.cloneElement(s,h,a)}},{key:"render",value:function(){var e=this.getAllEvents(this.props);return e?this.getContainer(this.props,this.baseProps,e):v.a.cloneElement(this.props.container,{children:this.props.children})}}])&&P(n.prototype,r),o&&P(n,o),t}(v.a.Component);Object.defineProperty(k,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictorySharedEvents"}),Object.defineProperty(k,"role",{configurable:!0,enumerable:!0,writable:!0,value:"shared-event-wrapper"}),Object.defineProperty(k,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:h.a.oneOfType([h.a.arrayOf(h.a.node),h.a.node]),container:h.a.node,eventKey:h.a.oneOfType([h.a.array,h.a.func,E.a.allOfType([E.a.integer,E.a.nonNegative]),h.a.string]),events:h.a.arrayOf(h.a.shape({childName:h.a.oneOfType([h.a.string,h.a.array]),eventHandlers:h.a.object,eventKey:h.a.oneOfType([h.a.array,h.a.func,E.a.allOfType([E.a.integer,E.a.nonNegative]),h.a.string]),target:h.a.string})),externalEventMutations:h.a.arrayOf(h.a.shape({callback:h.a.function,childName:h.a.oneOfType([h.a.string,h.a.array]),eventKey:h.a.oneOfType([h.a.array,E.a.allOfType([E.a.integer,E.a.nonNegative]),h.a.string]),mutation:h.a.function,target:h.a.oneOfType([h.a.string,h.a.array])})),groupComponent:h.a.node}}),Object.defineProperty(k,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{groupComponent:v.a.createElement("g",null)}}),Object.defineProperty(k,"contextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{getTimer:h.a.func}}),Object.defineProperty(k,"childContextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{getTimer:h.a.func}})}}]);